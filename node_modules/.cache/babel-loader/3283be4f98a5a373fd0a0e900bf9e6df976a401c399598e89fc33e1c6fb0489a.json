{"ast":null,"code":"import _slicedToArray from\"/home/carrot/repos/image-converter/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useCallback}from'react';import\"bootstrap/dist/css/bootstrap.min.css\";import'./App.css';import upload from\"./services/FileUploadService\";import JSZip from'jszip';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),selectedFile=_useState2[0],setSelectedFile=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),binaryData=_useState4[0],setBinaryData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),hexData=_useState6[0],setHexData=_useState6[1];var handleUpload=useCallback(function(){if(selectedFile){upload(selectedFile,function(progressEvent){var percentCompleted=Math.round(progressEvent.loaded/progressEvent.total*100);console.log(\"Upload Progress: \".concat(percentCompleted,\"%\"));}).then(function(response){setBinaryData(response.binary);setHexData(response.hex);}).catch(function(error){console.error(\"File upload error:\",error);});}},[selectedFile]);useEffect(function(){if(selectedFile){handleUpload();}},[selectedFile,handleUpload]);var handleFileChange=function handleFileChange(event){if(event.target.files&&event.target.files[0]){setSelectedFile(event.target.files[0]);setBinaryData(null);setHexData(null);}};var downloadZippedData=function downloadZippedData(){if(binaryData&&hexData){var zip=new JSZip();zip.file('binary.txt',Array.from(binaryData).join(' '));zip.file('hex.txt',hexData);zip.generateAsync({type:'blob'}).then(function(content){// Create a temporary link to trigger the download\nvar link=document.createElement('a');link.href=URL.createObjectURL(content);link.download='binary_and_hex.zip';link.click();});}};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"header\",{className:\"App-header\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"drop-container\",id:\"dropcontainer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"drop-title\",children:\"Drop files here\"}),\"or\",/*#__PURE__*/_jsx(\"input\",{id:\"fileupload\",type:\"file\",name:\"fileupload\",onChange:handleFileChange,required:true})]}),binaryData&&hexData&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"filedownload\",id:\"filedownload\",onClick:downloadZippedData,children:\"Download Zipped Data\"})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","upload","JSZip","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","selectedFile","setSelectedFile","_useState3","_useState4","binaryData","setBinaryData","_useState5","_useState6","hexData","setHexData","handleUpload","progressEvent","percentCompleted","Math","round","loaded","total","console","log","concat","then","response","binary","hex","catch","error","handleFileChange","event","target","files","downloadZippedData","zip","file","Array","from","join","generateAsync","type","content","link","document","createElement","href","URL","createObjectURL","download","click","className","children","id","name","onChange","required","onClick"],"sources":["/home/carrot/repos/image-converter/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport './App.css';\nimport upload from \"./services/FileUploadService\";\nimport JSZip from 'jszip';\n\nconst App: React.FC = () => {\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [binaryData, setBinaryData] = useState<Uint8Array | null>(null);\n  const [hexData, setHexData] = useState<string | null>(null);\n\n  const handleUpload = useCallback(() => {\n    if (selectedFile) {\n      upload(selectedFile, (progressEvent: ProgressEvent) => {\n        const percentCompleted = Math.round((progressEvent.loaded / progressEvent.total) * 100);\n        console.log(`Upload Progress: ${percentCompleted}%`);\n      })\n        .then((response) => {\n          setBinaryData(response.binary);\n          setHexData(response.hex);\n        })\n        .catch((error) => {\n          console.error(\"File upload error:\", error);\n        });\n    }\n  }, [selectedFile]);\n\n  useEffect(() => {\n    if (selectedFile) {\n      handleUpload();\n    }\n  }, [selectedFile, handleUpload]);\n\n  const handleFileChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    if (event.target.files && event.target.files[0]) {\n      setSelectedFile(event.target.files[0]);\n      setBinaryData(null);\n      setHexData(null);\n    }\n  };\n\n  const downloadZippedData = () => {\n    if (binaryData && hexData) {\n      const zip = new JSZip();\n      zip.file('binary.txt', Array.from(binaryData).join(' '));\n      zip.file('hex.txt', hexData);\n\n      zip.generateAsync({ type: 'blob' }).then((content) => {\n        // Create a temporary link to trigger the download\n        const link = document.createElement('a');\n        link.href = URL.createObjectURL(content);\n        link.download = 'binary_and_hex.zip';\n        link.click();\n      });\n    }\n  };\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <label className=\"drop-container\" id=\"dropcontainer\">\n          <span className=\"drop-title\">Drop files here</span>\n          or\n          <input id=\"fileupload\" type=\"file\" name=\"fileupload\" onChange={handleFileChange} required />\n        </label>\n        {binaryData && hexData && (\n          <div>\n            <button className=\"filedownload\" id=\"filedownload\" onClick={downloadZippedData}>Download Zipped Data</button>\n          </div>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}